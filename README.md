# Динамические двумерные массивы в С #


## I - Обзор

Модуль позволяет удобно манипулировать динамическими матрицами. Он реализует новый тип данных - динамический двумерный массив, благодаря которому можно легко создавать матрицы не только константного размера (определенного еще до выполнения программы), но и при помощи переменных значений. Так же модуль предоставляет функции, облегчающие работу с матрицами.

`typedef struct s_matrix t_matrix` - динамический двумерный массив, данные которого хранятся по адресу, на который указывает `t_matrix::arr`. Так же структура содержит количество строк и колонок матрицы, необходимых для работы с ней.

`t_matrix *matrix_create(unsigned rows, unsigned cols)` - создает двумерную матрицу размером, соответствующим произведению количества строк и столбцов, и возвращает указатель на нее. Матрица создается аллоцированием динамической памяти. Память выделяется дважды: для всей структуры и для массива. Потому для полного освобождения памяти нужно либо воспользоваться функцией `matrix_delete()`, либо последовательно освободить сначала указатель `matrix::arr`, а затем и саму структуру `t_matrix`.

`void matrix_delete(t_matrix *matrix)` - корректно свобождает память аллоцированную под матрицу.

## II - Применение

Для использования в своем проекте:
 - включите файл `matrix.c` в компиляцию своего проекта
 - используйте директиву подключения заголовочного файла `#include "matrix.h"` в тех файлах, где собираете использовать матрицы и функции работы с ними
 - скомпилируйте исходные файлы с указанием папки с заголовочным файлом `-I` 

Пример использования:

```c
#include <stdio.h>
#include "matrix.h"

int main()
{
	t_matrix *map;
	unsigned y, x; // rows, cols

	y = 3;
	x = y - 1;

	map = matrix_create(y, x);

	map->arr[0][0] = 1;
	map->arr[y - 1][x - 1] = 2;

	printf("rows: %u\ncols: %u\n", map->rows, map->cols);
	printf("data: %d %d\n", map->arr[0][0], map->arr[y - 1][x - 1]);

	matrix_delete(map);
}
```

Более подробный пример можно посмотреть в папке `example`.
Для его компиляции воспользуйтесь утилитой `make`:
 - перейдите в папку `example` и напишите в терминале команду `make`
 - для запуска примера запустите исполняемый файл `./main`

## III - Лицензия

Код распространяется под лицензией MIT.
Смотрите файл [LICENSE](https://github.com/smysloff/c-dynamic-matrix/blob/main/LICENSE) для подробной информации.

## IV - Версии

Текущая версия - 1.0.
